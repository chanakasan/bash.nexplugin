#!/bin/bash

main() {
  local a1="$1"
  local a2="$2"
  local fn=_ed_$a1
  if [[ $(type -t $fn ) == function ]]; then
    $fn "${@:2}"
  else
    print_usage
    wait_for_key
  fi
}

wait_for_key() {
  echo "Press any key to continue"
  while [ true ]; do
    read -t 5 -n 1
    if [ $? = 0 ]; then
      exit
    else
      echo "waiting for the keypress"
    fi
  done
}

print_usage() {
  echo "Usage: ed <type> <file>"
}

_ed_inp() {
  vim $HOME/inputrc
}

_ed_ssh() {
  vim $HOME/.ssh/config
}

_ed_rc() {
  edit_bashrc
}
_ed_brc() {
  edit_bashrc
}

edit_bashrc() {
  vim $HOME/.bashrc
}

_ed_vrc() {
  vim $HOME/.vimrc
}

# open in vscodede
_ed_vim() {
  vscode $HOME/dotfiles/nex-vim
}

_ed_bash() {
  vscode $nex_bash_path
}

_ed_umod() {
  local user_mods_path=$HOME/umods
  vscode $user_mods_path
}

_ed_tmux() {
  vscode $nex_tmux_path
}

_ed_mux() {
  vscode $nex_mux_path
}

_ed_mod() {
  vscode $nex_mods_path
}

_ed_git() {
  vscode $nex_git_path
}

_ed_script() {
  vscode $nex_script_path
}

main "$@"
