nex() {
  local v1="$1"
  if [ "$v1" == "provision" ]; then
    _nex_provision ${@:2}
  else
    _nex_script $@
  fi
}

_nex_provision() {
  echo "Provision: $1"
}

_nex_script() {
  local full_script_name=nex-$1-$2.sh
  echo "=> Running $full_script_name"
  $full_script_name $3
}

_nex_script_2() {
  local old_ifs="$IFS"
  IFS='-'
  local partial_name="$*"
  IFS=$old_ifs
  local full_script_name=nex-$partial_name.sh
  echo "=> Running $full_script_name"
  $full_script_name
}
